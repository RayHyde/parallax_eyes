!function($){function getMin(arr){return Math.min.apply({},arr)}function getMax(arr){return Math.max.apply({},arr)}function moveable(){return void 0!=window.DeviceMotionEvent}function detectMotion(e){if(!((new Date).getTime()<lastRender+delay)&&moveable()){var accel=e.accelerationIncludingGravity,x=accel.x,y=accel.y;motionData.xArray.length>=5&&motionData.xArray.shift(),motionData.yArray.length>=5&&motionData.yArray.shift(),motionData.xArray.push(x),motionData.yArray.push(y),motionData.xMotion=Math.round(1e3*(getMax(motionData.xArray)-getMin(motionData.xArray)))/1e3,motionData.yMotion=Math.round(1e3*(getMax(motionData.yArray)-getMin(motionData.yArray)))/1e3,(motionData.xMotion>1.5||motionData.yMotion>1.5)&&10!=motionMax&&(motionMax=10),motionData.xMotion>motionAllowance||motionData.yMotion>motionAllowance?movementCycles++:movementCycles=0,movementCycles>=5?(motionEnabled=!0,$(document).unbind("mousemove.plax"),$(window).bind("devicemotion",plaxifier(e))):(motionEnabled=!1,$(window).unbind("devicemotion"),$(document).bind("mousemove.plax",function(e){plaxifier(e)}))}}function plaxifier(e){if(!((new Date).getTime()<lastRender+delay)){lastRender=(new Date).getTime();var leftOffset=null!=plaxActivityTarget.offset()?plaxActivityTarget.offset().left:0,topOffset=null!=plaxActivityTarget.offset()?plaxActivityTarget.offset().top:0,x=e.pageX-leftOffset,y=e.pageY-topOffset;if(!(0>x||x>plaxActivityTarget.width()||0>y||y>plaxActivityTarget.height())){if(1==motionEnabled){var i=window.orientation?(window.orientation+180)%360/90:2,accel=e.accelerationIncludingGravity,tmp_x=i%2==0?-accel.x:accel.y,tmp_y=i%2==0?accel.y:accel.x;x=i>=2?tmp_x:-tmp_x,y=i>=2?tmp_y:-tmp_y,x=(x+motionMax)/2,y=(y+motionMax)/2,0>x?x=0:x>motionMax&&(x=motionMax),0>y?y=0:y>motionMax&&(y=motionMax)}var layer,i,hRatio=x/(1==motionEnabled?motionMax:plaxActivityTarget.width()),vRatio=y/(1==motionEnabled?motionMax:plaxActivityTarget.height());for(i=layers.length;i--;)layer=layers[i],newX=layer.startX+layer.inversionFactor*layer.xRange*hRatio,newY=layer.startY+layer.inversionFactor*layer.yRange*vRatio,layer.background?layer.obj.css("background-position",newX+"px "+newY+"px"):layer.obj.css("left",newX).css("top",newY)}}}var maxfps=25,delay=1/maxfps*1e3,lastRender=(new Date).getTime(),layers=[],plaxActivityTarget=$(window),motionEnabled=!1,motionMax=1,motionAllowance=.05,movementCycles=0,motionData={xArray:[0,0,0,0,0],yArray:[0,0,0,0,0],xMotion:0,yMotion:0};$.fn.plaxify=function(params){return this.each(function(){for(var layerExistsAt=-1,layer={xRange:$(this).data("xrange")||0,yRange:$(this).data("yrange")||0,invert:$(this).data("invert")||!1,background:$(this).data("background")||!1},i=0;i<layers.length;i++)this===layers[i].obj.get(0)&&(layerExistsAt=i);for(var param in params)0==layer[param]&&(layer[param]=params[param]);if(layer.inversionFactor=layer.invert?-1:1,layer.obj=$(this),layer.background){if(pos=(layer.obj.css("background-position")||"0px 0px").split(/ /),2!=pos.length)return;if(x=pos[0].match(/^((-?\d+)\s*px|0+\s*%|left)$/),y=pos[1].match(/^((-?\d+)\s*px|0+\s*%|top)$/),!x||!y)return;layer.startX=x[2]||0,layer.startY=y[2]||0}else{var position=layer.obj.position();layer.obj.css({top:position.top,left:position.left,right:"",bottom:""}),layer.startX=this.offsetLeft,layer.startY=this.offsetTop}layer.startX-=layer.inversionFactor*Math.floor(layer.xRange/2),layer.startY-=layer.inversionFactor*Math.floor(layer.yRange/2),layerExistsAt>=0?layers.splice(layerExistsAt,1,layer):layers.push(layer)})},$.plax={enable:function(opts){$(document).bind("mousemove.plax",function(e){opts&&(plaxActivityTarget=opts.activityTarget||$(window)),plaxifier(e)}),moveable()&&(window.ondevicemotion=function(e){detectMotion(e)})},disable:function(){$(document).unbind("mousemove.plax"),window.ondevicemotion=void 0}},"undefined"!=typeof ender&&$.ender($.fn,!0)}(function(){return"undefined"!=typeof jQuery?jQuery:ender}());